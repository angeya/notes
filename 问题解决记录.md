## 问题解决记录

### 平台

#### Minio文件下载返回空（文件上传提示服务器和请求端时间相差太大）问题
只需要设置minio服务器时间和请求端时间一致即可


#### 点击菜单时候出现404
有可能是localstorage存满了，导致的，不过这个问题已经被优化了


#### 技术部开发环境启动时所有服务都起不来，显示sql事务相关的内容
元数据版本被删除，导致加载导入的元数据太多，数据库出现问题

#### 测试没问题，技术部升级后有的接口报错
大概率是缺少数据库字段导致的


### 后端

#### Minio调用api上传文件报错：S3 API Request made to Console port. S3 Requests should be sent to API port
Minio有两个端口，一个给API接口使用，一个给可视化控制台使用。当API操作使用控制台接口进行操作的时候，会报这个错。

### Minio文件下载，服务上的文件都是存在的，但是调用微服务接口发现有的文件正常，有的为空

类似这种情况，大概率是多个微服务使用了负载均衡。其中个别服务器有问题（这里是微服务时间和minio服务器时间相差太大），导致有的请求正常有的不正常。


#### 微服务使用synchronized关键字达不到锁的目的
因为可能起的微服务很多，这时候应该使用分布式锁，比如redis或者zookeeper


#### iText导出Pdf时加载resources下的字体文件，不生效
maven打包时候导致字体文件发生改变，应该使用
```xml
<plugin>
	<groupId>org.apache.maven.plugins</groupId>
	<artifactId>maven-resources-plugin</artifactId>
	<version>3.1.0</version>
	<!--使用文件扩展过滤配置解决字体文件损坏问题-->
	<configuration>
		<nonFilteredFileExtensions>
			<nonFilteredFileExtension>zip</nonFilteredFileExtension>
			<nonFilteredFileExtension>ttf</nonFilteredFileExtension>
		</nonFilteredFileExtensions>
	</configuration>
</plugin>
```

#### InfluxDB使用limit时，结果的数量不对

查询时候influxDB返回多张表，需要先使用group函数进行合并，再执行limit函数。示例flux query如下：

```
from(bucket: "sciyon-bucket")
  |> range(start: 2023-07-24T00:00:00Z, stop: 2023-07-25T00:00:00Z)
  |> filter(fn: (r) => r["_measurement"] == "PfSystemAccess")
  |> group()
  |> sort(columns: ["_time"], desc: false)
  |> limit(n: 20, offset: 0)
```

#### 调用Controller的A接口，依赖的service有值，调用调用Controller的B接口，依赖的service为null

可能是Controller的B接口中方法修饰符为private导致的。


### 前端

#### scss中::v-deep只需要在最外层使用就可以了，里层的不需要再使用，可以通过类名直接控制

#### Vue实现文件下载时，文件损坏，但是在postman里是正常。

大概率是axios没有设置type为blob导致的

#### Echarts图表监听click事件无效

可以检查下是不是series中的symbolSize设置为0了，因为默认的click事件就是监听图表节点的点击。

如果需要监听空白处的点击事件可以使用如下代码

```java
// 点击空白处
myChart.getZr().on('click', (event) => {
    console.log(event)
});
```



